---
title: 공간 앵커
description: 공간 앵커를 사용한 안정적인 홀로그램 렌더링의 모범 사례입니다.
author: thetuvix
ms.author: alexturn
ms.date: 02/24/2019
ms.topic: article
ms.localizationpriority: high
keywords: 좌표계, 공간 좌표계, 전세계 규모, 세계, 규모, 위치, 방향, 앵커, 공간 앵커, 세계 잠금, 전세계 잠금, 지속성, 공유
ms.openlocfilehash: 16165194d040ad22f7885897eddcc65cf9dcaec3
ms.sourcegitcommit: f20beea6a539d04e1d1fc98116f7601137eebebe
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 06/05/2019
ms.locfileid: "65730856"
---
# <a name="spatial-anchors"></a>공간 앵커

공간 앵커는 시간 경과에 따라 시스템이 추적해야 하는 세계의 중요 지점을 나타냅니다. 각 앵커에는 고정된 홀로그램이 정확히 제 위치에 있도록 하기 위해 다른 앵커나 참조 프레임에 상대적으로 필요에 따라 조정하는 [좌표계](coordinate-systems.md)가 있습니다.  앵커의 좌표계에서 홀로그램을 렌더링하면 어느 시점에나 해당 홀로그램이 가장 정확한 위치에 있게 됩니다. 이것은 시스템이 실제 세계에 비해 지속적으로 제자리로 이동하기 때문에 시간이 지남에 따라 홀로그램의 위치에 약간의 조정이 필요합니다.

앱 세션 및 디바이스 간에 공간 앵커를 유지 및 공유할 수도 있습니다.
* 로컬 공간 앵커를 디스크에 저장하고 나중에 다시 로드하면 단일 HoloLens 디바이스의 여러 앱 세션에서 실제 세계와 같은 위치를 추정할 수 있습니다.
* <a href="https://docs.microsoft.com/azure/spatial-anchors/overview" target="_blank">Azure Spatial Anchors</a>를 사용하여 클라우드 앵커를 만들면 앱이 HoloLens, iOS 및 Android 디바이스 간에 공간 앵커를 공유할 수 있습니다. 각 디바이스가 동일한 공간 앵커를 사용하여 홀로그램을 렌더링하면 모든 사용자가 실제 세계에서 같은 위치에 표시되는 홀로그램을 보게 됩니다.  이렇게 실제 세계 공유 환경을 제공합니다.
* HoloLens, iOS 및 Android 디바이스에서 비대칭 홀로그램 지속에 <a href="https://docs.microsoft.com/azure/spatial-anchors/overview" target="_blank">Azure Spatial Anchors</a>를 사용할 수도 있습니다.  유지되는 클라우드 공간 앵커를 공유하면 여러 디바이스가 동시에 함께 존재하지 않는 경우에도 시간 경과에 따라 같은 지속형 홀로그램을 관찰할 수 있습니다.

5미터 반경 범위를 유지하는 테더링된 데스크톱 헤드셋의 고정 규모 또는 공간 규모 환경에서는 일반적으로 공간 앵커 대신 [단계 참조 프레임](coordinate-systems.md#stage-frame-of-reference)을 사용하여 모든 콘텐츠를 렌더링하는 단일 좌표계를 제공합니다. 그러나 앱에서 사용자가 HoloLens에서 5미터 이상 돌아다니면서 건물의 한 층 전체를 움직인다면 콘텐츠를 안정적으로 유지하기 위한 공간 앵커가 필요합니다.

공간 앵커는 세계에서 고정 상태를 유지해야 하는 홀로그램에 적합합니다. 배치된 앵커는 이동할 수 없습니다. 사용자를 따라다녀야 하는 동적 홀로그램에는 앵커보다 더 적합한 대안이 있습니다. 고정 참조 프레임(Unity의 세계 좌표의 기초) 또는 일체형 참조 프레임을 사용하여 동적 홀로그램을 배치하는 것이 가장 좋습니다.

## <a name="best-practices"></a>모범 사례

이 공간 앵커 지침은 실제 세계를 정확하게 따르는 고정 홀로그램을 렌더링하는 데 도움이 됩니다.

### <a name="create-spatial-anchors-where-users-place-them"></a>사용자가 배치하는 공간 앵커 만들기

대부분의 경우 명시적으로 공간 앵커를 배치하는 것은 바로 사용자입니다.

예를 들어, HoloLens에서는 앱이 사용자의 [시선](gaze.md)을 [공간 매핑](spatial-mapping.md) 메시와 교차하여 사용자가 홀로그램을 배치할 위치를 결정하도록 할 수 있습니다. 사용자가 눌러서 이 홀로그램을 배치하면 교차 지점에 공간 앵커를 만든 다음, 해당 앵커의 좌표계 원점에 홀로그램을 배치합니다.

로컬 공간 앵커는 만들기 간편하고 성능이 좋으며, 여러 앵커가 기본 센서 데이터를 공유할 수 있는 경우 시스템이 내부 데이터를 통합하게 됩니다. 홀로그램의 고정 그룹 등, 아래에서 설명한 경우를 제외하고 보통은 사용자가 명시적으로 배치하는 각각의 홀로그램에 새 로컬 공간 앵커를 만들어야 합니다.

### <a name="always-render-anchored-holograms-within-3-meters-of-their-anchor"></a>항상 앵커의 3미터 범위 내에서 고정된 홀로그램 렌더링

공간 앵커는 앵커의 원점 근처에 좌표계를 안정화합니다. 이 원점에서 3미터를 넘어서 홀로그램을 렌더링할 경우, 레버암 효과로 인해 이 홀로그램에는 원점으로부터의 거리에 비례하여 눈에 띄는 위치 오류가 발생할 수 있습니다. 사용자가 앵커 주변에 서 있으면 홀로그램이 사용자로부터도 멀기 때문에 문제가 없습니다. 즉 먼 홀로그램의 각도 오차가 작습니다. 그러나 사용자가 이 먼 홀로그램까지 걸어간다면 보기에서 크게 보이므로 먼 앵커 원점으로부터의 레버암 효과가 분명하게 드러나게 됩니다.

### <a name="group-holograms-that-should-form-a-rigid-cluster"></a>고정 클러스터를 형성하는 홀로그램 그룹화

앱에서 홀로그램이 서로 고정된 관계를 유지할 것으로 예상하는 경우 여러 홀로그램이 같은 공간 앵커를 공유할 수 있습니다.

예를 들어 방에 홀로그래픽 태양계를 애니메이션으로 표현하는 경우, 모든 태양계 개체를 가운데의 단일 앵커에 묶어 서로 상대적으로 자연스럽게 움직이게 하는 것이 낫습니다. 이 때 구성 요소 부분은 앵커 주변을 동적으로 움직이더라도 고정된 하나의 태양계가 됩니다.

홀로그램 안정성을 유지하기 위한 핵심은 앞의 3미터 규칙을 따르는 것입니다.

### <a name="render-highly-dynamic-holograms-using-the-stationary-frame-of-reference-instead-of-a-local-spatial-anchor"></a>로컬 공간 앵커가 아닌 고정 참조 프레임을 사용하여 매우 동적인 홀로그램 렌더링

방을 돌아다니는 캐릭터나 사용자 근처 벽을 따라다니는 유동 UI 등, 매우 동적인 홀로그램의 경우 로컬 공간 앵커를 생략하고 [고정 참조 프레임](coordinate-systems.md#stationary-frame-of-reference)이 제공하는 좌표계에 직접 홀로그램을 렌더링하는 것이 가장 적합합니다(즉 Unity에서는 WorldAnchor 없이 세계 좌표에 직접 홀로그램을 배치하여 가능). 사용자가 홀로그램에서 멀어지면 고정 참조 프레임의 홀로그램이 벗어날 수 있습니다. 그러나 동적 홀로그램의 경우 홀로그램이 어떤 식으로든 지속적으로 움직이고 있거나 그 동작이 지속적으로 사용자에게 가깝게 유지되어 벗어남이 최소화되기 때문에 눈에 띄게 드러날 가능성은 낮습니다.

동적 홀로그램의 흥미로운 사례 하나는 고정된 좌표계 사이를 애니메이션으로 이동하는 개체입니다. 예를 들어 10미터 떨어진 두 개의 성이 있고 각각의 성은 자체 공간 앵커 위에 있으며 한 성이 다른 성에 탄환을 발사합니다. 탄환이 발사되는 시점에 고정 참조 프레임에서 첫 번째 성의 고정 좌표계에 있는 대포와 일치하도록 적합한 위치에 렌더링할 수 있습니다. 그런 다음, 탄환이 공중으로 10미터 날아갈 때 고정 참조 프레임의 궤도를 따를 수 있습니다. 탄환이 다른 성에 도달하면 해당 성의 강체에 따른 물리 계산을 위해 두 번째 성의 좌표계에 따라 움직이게 할 수 있습니다.

디바이스 간에 매우 동적인 홀로그램을 공유할 경우 고정 참조 프레임을 디바이스 간에 공유할 수 없으므로 상위 역할을 수행할 클라우드 공간 앵커를 선택해야 합니다.  그러나 이 경우 모든 디바이스에서 홀로그램이 안정적으로 표시되도록 동적 홀로그램 또는 이를 보는 디바이스가 앵커의 3미터 반경 안에 있도록 해야 합니다.

### <a name="avoid-creating-a-grid-of-spatial-anchors"></a>공간 앵커 그리드를 만들지 않음

사용자가 돌아다닐 때 앱이 공간 앵커의 일반 그리드를 버리고 이동에 따라 앵커에서 앵커로 동적 개체를 전환하려 할 수 있습니다. 그러나 시스템 자체에서 내부적으로 유지 관리하는 심층 센서 데이터를 활용하지 않는다면 여기에는 많은 앱 관리 작업이 필요합니다. 이러한 경우 앞의 섹션에서 설명한 대로 고정 참조 프레임에 홀로그램을 배치하면 보통은 적은 작업으로 더 나은 결과를 얻을 수 있습니다.

정적 공간 주변에 클라우드 공간 앵커 집합을 미리 배치할 때는 임의의 앵커 그리드를 만들기보다, 위의 원칙에 따라 사용자가 마주칠 키 홀로그램의 위치에 공간 앵커를 배치하는 것을 고려해 봅니다.  이렇게 하면 해당 키 홀로그램의 안정성을 극대화할 수 있습니다.

### <a name="release-local-spatial-anchors-you-no-longer-need"></a>더 이상 필요하지 않은 로컬 공간 앵커 릴리스

로컬 공간 앵커가 활성 상태인 동안 시스템은 해당 앵커에 가까운 센서 데이터의 위치를 유지하는 데 우선 순위를 둡니다. 더 이상 공간 데이터를 사용하지 않는 경우 해당 좌표계에 대한 액세스를 중지합니다. 이렇게 하면 필요에 따라 기본 센서 데이터를 제거할 수 있습니다.

이것은 특히 공간 앵커 저장소에 유지되는 로컬 앵커에 중요합니다. 이 앵커의 배경인 센서 데이터는 앱이 향후의 앱 세션에서 앵커를 찾을 수 있도록 영구적으로 유지되므로 다른 앵커를 추적하는 데 사용할 수 있는 공간이 줄어듭니다. 향후의 세션에서 다시 찾아야 하는 로컬 앵커만 유지하고 사용자에게 더 이상 의미가 없으면 저장소에서 제거합니다.

클라우드 공간 앵커의 경우 상황에 따라 스토리지를 확장할 수 있습니다.  필요한 만큼 클라우드 앵커를 저장하고, 사용자가 해당 앵커에서 다시 홀로그램을 찾을 필요가 없다고 판단될 때만 릴리스합니다.

## <a name="see-also"></a>참고 항목
* [좌표계](coordinate-systems.md)
* [혼합 현실의 공유 환경](shared-experiences-in-mixed-reality.md)
* <a href="https://docs.microsoft.com/azure/spatial-anchors" target="_blank">Azure Spatial Anchors</a>
* [Unity의 지속성](persistence-in-unity.md)
* [DirectX의 공간 앵커](coordinate-systems-in-directx.md#place-holograms-in-the-world-using-spatial-anchors)
* [사례 연구 - 현실의 구멍 속 살펴보기](case-study-looking-through-holes-in-your-reality.md)
